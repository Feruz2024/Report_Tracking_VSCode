"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[567],{567:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});var n=t(43),i=t(579);const a=function(e){let{assignment:s,onSubmitted:t}=e;const[a,r]=(0,n.useState)(s.planned_spots||""),[d,l]=(0,n.useState)(s.missed_spots||""),[u,o]=(0,n.useState)(s.transmitted_spots||""),[m,p]=(0,n.useState)(s.gain_spots||""),[c,b]=(0,n.useState)(""),[h,S]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{r(s.planned_spots||""),l(s.missed_spots||""),o(s.transmitted_spots||""),p(s.gain_spots||"")}),[s]),(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b(""),S(!0);const n=Number(a),i=Number(d),r=Number(u);if(n!==i+r)return b("Planned spots must equal missed + transmitted spots."),void S(!1);try{if(!(await fetch(`/api/assignments/${s.id}/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({planned_spots:n,missed_spots:i,transmitted_spots:r,gain_spots:""===m?null:Number(m),status:"SUBMITTED"})})).ok)throw new Error("Failed to submit summary");t&&t()}catch(l){b(l.message||"Error")}finally{S(!1)}},style:{border:"1px solid #ccc",padding:8,margin:8},children:[(0,i.jsx)("h4",{children:"Submit Reconciliation Summary"}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:["Planned Spots: ",(0,i.jsx)("input",{type:"number",min:"0",value:a,onChange:e=>r(e.target.value),required:!0,disabled:h})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:["Missed Spots: ",(0,i.jsx)("input",{type:"number",min:"0",value:d,onChange:e=>l(e.target.value),required:!0,disabled:h})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:["Transmitted Spots: ",(0,i.jsx)("input",{type:"number",min:"0",value:u,onChange:e=>o(e.target.value),required:!0,disabled:h})]})}),(0,i.jsx)("div",{children:(0,i.jsxs)("label",{children:["Gain Spots (Free): ",(0,i.jsx)("input",{type:"number",min:"0",value:m,onChange:e=>p(e.target.value),disabled:h})]})}),(0,i.jsx)("button",{type:"submit",disabled:h,children:"Submit Summary"}),c&&(0,i.jsx)("div",{style:{color:"red"},children:c})]})}}}]);
//# sourceMappingURL=567.50ad8f31.chunk.js.map